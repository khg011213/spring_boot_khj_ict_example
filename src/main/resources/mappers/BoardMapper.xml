<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="edu.ict.ex.mapper.BoardMapper">
	<select id="getList" resultType="edu.ict.ex.vo.BoardVO"> <!-- 리스트 타입이어도 괄호안에이쓴ㄴ VO를 적음 -->
        select * from MVC_BOARD
    </select>
    
    <!-- 자바에서 파라미터 가져오는법 #{}사용 -->
    <select id="read" resultType="edu.ict.ex.vo.BoardVO"> <!-- 리스트 타입이어도 괄호안에이쓴ㄴ VO를 적음 -->
        select * from MVC_BOARD where bid = #{bno}
    </select>
    
    <delete id="delete">
    <![CDATA[
        delete from MVC_BOARD where bid = #{bid}
    ]]>
    </delete> 
    
     <insert id="insert">
    <![CDATA[
       insert into mvc_board (bId, bName, bTitle, bContent, bHit, bGroup, bStep, bIndent)  values (mvc_board_seq.nextval, #{bname} , #{btitle}, #{bcontent}, 0, mvc_board_seq.currval, 0, 0)
    ]]>
    </insert> 
    
    <update id="modify">
    <![CDATA[
       UPDATE mvc_board SET bname = #{bname}, btitle = #{btitle}, bcontent = #{bcontent} WHERE bid = #{bid}
    ]]>
    </update> 
    
    <update id="reply">
    <![CDATA[
            UPDATE mvc_board
            SET bstep = bstep + 1
            WHERE bgroup = #{bgroup} AND bstep > #{bstep};

            INSERT INTO mvc_board (bId, bName, bTitle, bContent, bGroup, bStep, bIndent)
            VALUES (mvc_board_seq.nextval, #{bName}, #{bTitle}, #{bContent}, #{bGroup}, #{bStep}, #{bIndent})
    ]]>
    </update> 
        <select id="reply_view" resultType="edu.ict.ex.vo.BoardVO"> <!-- 리스트 타입이어도 괄호안에이쓴ㄴ VO를 적음 -->
        select * from MVC_BOARD where bid = #{bid}
    </select>
   
</mapper>